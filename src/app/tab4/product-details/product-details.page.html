<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons>
      <ion-back-button [text]="getBackButtonText()" defaultHref="/" color="light"></ion-back-button>
       <ion-note color="light">{{itemGroup}}</ion-note>
    </ion-buttons>
    <ion-buttons slot="primary">
      <ion-button (click)="scrollTo(itemCode)" id="viewSelectedItem">
        <ion-icon  name="barcode-outline" size="medium" ></ion-icon>
      </ion-button>
    </ion-buttons>
</ion-toolbar>
</ion-header>
<div class="loader"  *ngIf="isLoading">
  <ion-spinner name="lines" color="primary" mode="ios"></ion-spinner>
</div>
<ion-content fullscreen
[scrollEvents]="true" 
     (ionScrollStart)="logScrollStart($event)" 
     (ionScroll)="logScrolling($event)"
     (ionScrollEnd)="logScrollEnd($event)"
>

  
  <div class="ion-padding" slot="fixed" style="width: 100%!important" *ngIf="!isScrolling">
    <ion-searchbar mode="ios" placeholder="Type an Item"  (ionInput)='searchProduct($event)'></ion-searchbar>
  </div>
  <ion-card mode="ios" *ngFor="let product of products" style="margin:6rem 1rem!important;" id="{{product?.ItemCode}}">
    <ion-slides pager="true" [options]="slideOpts">
      <ion-slide *ngFor="let img of product?.ImageURL.split(';')">
        <img [src]="img" />
      </ion-slide>
    </ion-slides>
      <ion-item mode="ios">
        <span *ngFor="let img of thumbnails; let i = index">
          <ion-thumbnail  *ngIf="img.hasOwnProperty(product?.ItemCode)" (click)="presentActionSheet(i)">
            <img  [src]="img[product?.ItemCode]">
          </ion-thumbnail >
            
        </span>
        <ion-icon color="primary" slot="end" name="camera-outline" (click)="capturePhoto(product?.ItemCode)"></ion-icon>
            <ion-icon color="primary" slot="end" name="cloud-upload-outline" (click)="updateProduct()"></ion-icon>
      </ion-item>

    <ion-card-header>
      <ion-card-subtitle>{{product?.ItemCode}}</ion-card-subtitle>
      <ion-card-title><h6>{{product?.ItemName}}</h6></ion-card-title>
    </ion-card-header>
    <ion-card-content>
        
      <ion-grid>
        <ion-row class="ion-align-items-center">
          <ion-col>
            <small>QTY</small>
          </ion-col>
          <ion-col>
           <small>PRICE INCL.</small>
          </ion-col>
          <ion-col>
            <small>TAX AMOUNT</small>
          </ion-col>
        </ion-row>
        <ion-row class="ion-align-items-center">
          <ion-col>
            <small>{{product?.QtyOnHand | number}} {{product?.UOM}}</small>
          </ion-col>
          <ion-col>
            <small>{{(product?.SalePriceExcl * product?.SaleTaxRate/100) + product?.SalePriceExcl | currency:'KES '}}</small>
          </ion-col>
          <ion-col>
            <small>{{(product?.SalePriceExcl * product?.SaleTaxRate/100) | currency:'KES '}}</small>
          </ion-col>
        </ion-row>
      </ion-grid>
      <!-- Founded in 1829 on an isthmus between Lake Monona and Lake Mendota, Madison was named the capital of the Wisconsin Territory in 1836. -->
    </ion-card-content>
  </ion-card>

  <ion-fab size="small" vertical="bottom" horizontal="end"  slot="fixed" (click)="ScrollToTop()">
    <ion-fab-button>
      <ion-icon name="chevron-up-circle-outline"></ion-icon> 
    </ion-fab-button>
  </ion-fab>
</ion-content>
